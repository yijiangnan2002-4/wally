<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AB158x Series MCU API Reference: I3C_MASTER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="airoha.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AB158x Series MCU API Reference
   &#160;<span id="projectnumber">Airoha IoT SDK for BT Audio</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___i3_c___m_a_s_t_e_r.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">I3C_MASTER<div class="ingroups"><a class="el" href="group___h_a_l.html">HAL</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes the programming interfaces of the Improved-Inter-Integrated Circuit Master (I3C_MASTER) driver.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section describes the programming interfaces of the Improved-Inter-Integrated Circuit Master (I3C_MASTER) driver. </p>
<h1><a class="anchor" id="HAL_I3C_Master_Terms_Chapter"></a>
Terms and acronyms</h1>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>DMA</b> </td><td>Direct Memory Access. For an introduction to DMA, please refer to <a href="https://en.wikipedia.org/wiki/Direct_memory_access">DMA in Wikipedia</a> . </td></tr>
<tr>
<td><b>GPIO</b> </td><td>General Purpose Inputs-Outputs. For more details, please refer to the <a class="el" href="group___g_p_i_o.html">GPIO</a> module in HAL. </td></tr>
<tr>
<td><b>I3C</b> </td><td>Improved-Inter-Integrated Circuit. I3C is typically used to attach low-speed peripheral ICs to processors and microcontrollers. For an introduction to I3C, please refer to <a href="https://en.wikipedia.org/wiki/I3C_(bus)">I3C in Wikipedia</a>. </td></tr>
<tr>
<td><b>NVIC</b> </td><td>Nested Vectored Interrupt Controller. NVIC is the interrupt controller of ARM Cortex-M4. For more details, please refer to <a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.100166_0001_00_en/ric1417175922867.html">NVIC introduction in ARM Cortex-M4 Processor Technical Reference Manual </a>. </td></tr>
</table>
<h1><a class="anchor" id="HAL_I3C_Master_Features_Chapter"></a>
Supported features</h1>
<ul>
<li><b>Supported</b> <b>CCC</b> <b>command</b> <b>modes</b> <b></b>: <br />
 In this mode, user can transfer CCC command packets to the slave device. The functions used for CCC transfer are:<ul>
<li><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga0f2ae485a252fb50facb3fecde735356" title="This function sends the CCC command to the slave device (only used for I3C mode). ...">hal_i3c_master_control()</a>.</li>
</ul>
</li>
<li><b>Supported</b> <b>private</b> <b>write</b> /<b>read</b> <b>modes</b> <b></b>: <br />
 In this mode, user can write/read data from the slave device. The functions used for CCC transfer are:<ul>
<li><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gacd05dce1acbb7202737222c930dbc65c" title="This function for private read/write from/to slave device. ">hal_i3c_master_transfer()</a>.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="HAL_I3C_Master_Driver_Usage_Chapter"></a>
How to use this driver</h1>
<ul>
<li><p class="startli"><b>Using</b> <b>CCC</b> <b>command</b> <b>mode</b>. <br />
</p><ul>
<li>I3C broadcast CCC format: <div class="image">
<img src="hal_i3c_broadcast_ccc_format.png" alt="hal_i3c_broadcast_ccc_format.png"/>
</div>
</li>
<li>I3C direct CCC format: <div class="image">
<img src="hal_i3c_direct_ccc_format.png" alt="hal_i3c_direct_ccc_format.png"/>
</div>
</li>
</ul>
<p class="startli">To use the I3C driver, you must configure the GPIO pins to pinmux to I3C SCL and I3C SDA, then call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO. ">hal_pinmux_set_function()</a> to select the pinmux function. After setting the pinmux, call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> to initialize I3C status. Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> to release the I3C resource.<br />
 Steps are shown below:</p><ul>
<li>Step1: Call <a class="el" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d" title="This function initializes the GPIO hardware with basic functionality. ">hal_gpio_init()</a> to initialize the pin. For mode details about hal_gpio_init, please refer to GPIO module in HAL.</li>
<li>Step2: Call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO. ">hal_pinmux_set_function()</a> to set the GPIO pinmux or use the EPT tool to apply the pinmux settings.</li>
<li>Step3: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> to initialize the I3C master.</li>
<li>Step4: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga0f2ae485a252fb50facb3fecde735356" title="This function sends the CCC command to the slave device (only used for I3C mode). ...">hal_i3c_master_control()</a> to send the CCC command to the slave device.</li>
<li>Step5: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> to de-allocate the I3C master if it is no longer in use.</li>
<li>Sample code: <div class="fragment"><div class="line">ATTR_RWDATA_IN_NONCACHED_SYSRAM_4BYTE_ALIGN  <span class="keyword">static</span> uint8_t i3c_rx_buff[128];</div><div class="line"><span class="comment">//pid: should be gotten from the sensor datasheet, da: an address which will be assigned to the &#39;pid&#39; device</span></div><div class="line"><a class="code" href="structhal__i3c__master__pid__da__map__t.html">hal_i3c_master_pid_da_map_t</a> slave_device_map[1] = {</div><div class="line">   {.<a class="code" href="structhal__i3c__master__pid__da__map__t.html#ab0b361e500d8fd4abd380303477c5e42">pid</a> = {0x02, 0x08, 0x00, 0x6C, 0x10, 0x0B}, .da = 0x22},</div><div class="line">};</div><div class="line"><a class="code" href="structhal__i3c__master__config__t.html">hal_i3c_master_config_t</a>         init_config;</div><div class="line"><a class="code" href="structhal__i3c__master__control__config__t.html">hal_i3c_master_control_config_t</a> config;</div><div class="line"></div><div class="line"><span class="comment">//Init GPIO, set GPIO pinmux (if EPT tool has not been used to configure the related pinmux).</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daad6e787b006357d37425a1202449c426d">HAL_GPIO_27</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>);</div><div class="line"><span class="comment">//Call hal_pinmux_set_function() to set GPIO pinmux, for more information, please reference hal_pinmux_define.h</span></div><div class="line"><span class="comment">//It is not necessary to configure pinmux if the EPT tool is used.</span></div><div class="line"><span class="comment">//function_index = HAL_GPIO_17_I3C0_SCL</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa497b053d686d2f1c04d992000088ccf5">HAL_GPIO_17</a>, function_index);</div><div class="line"><span class="comment">//function_index = HAL_GPIO_18_I3C0_SDA</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa42be09102c1b89abc64ace668be9e490">HAL_GPIO_18</a>, function_index);</div><div class="line"></div><div class="line"><span class="comment">//Init I3C master config parameter</span></div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a11918d123925f61f95898a3ed7bf6b16">mode</a>           = <a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggafb0f18a08a709df04558900032d8ad8dade52d4d733423c51725cd784bc9e999f">HAL_I3C_MASTER_WORKING_MODE_I3C</a>;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a0fd0deacc6b63563d58437a05aa19955">map_pid_da_config</a> = slave_device_map;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#aa6cde4d300ab24e8545d93e6d46058a0">map_pid_da_sz</a>     = <span class="keyword">sizeof</span>(slave_device_map) / <span class="keyword">sizeof</span>(<a class="code" href="structhal__i3c__master__pid__da__map__t.html">hal_i3c_master_pid_da_map_t</a>);</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#ae6db45f29353cfee0b2dd9ee378546a7">fast_speed_khz</a> = 1000;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a200d150b5ae6d6b90d427cb445e8a84b">high_speed_khz</a> = 12000;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a31be928b34b3c93bf5e3cb469250cbb2">call_back</a> = i3c_user_callback;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a> = NULL;</div><div class="line"></div><div class="line"><span class="comment">//Init CCC config as GETMWL</span></div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#af40ca89c7a37243a6d5a03d2352069c3">trans_type</a>     = <a class="code" href="group___i3_c___m_a_s_t_e_r.html#gga1f4dc6ea6bd316e84b56d3cd5fe41e36a3214fb6f7bf433e51c3c7bfc887c8adf">HAL_I3C_MASTER_TRANSFER_TYPE_RECEIVE</a>;</div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#ad6f6033ee92f8a9b874bd40df8d6afd3">slave_addr</a>     = 0x22;</div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#afc3eea6162d7de2ccffe145429edf5e3">ccc_cmd</a>        = 0x8B; <span class="comment">//CCC:GETMWL</span></div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#a6182535a8e6092f1f718ea45a5989794">def_byte_data</a>  = NULL; <span class="comment">//no defining byte for GETMWL</span></div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#a70a99b3fccfdde950a9abab1108cf839">data_buff_size</a> = 0;    <span class="comment">//no defining byte for GETMWL</span></div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#a3ee4bbdaf383ef93e2a18d8acecda08c">data_buff</a>      = i3c_rx_buff;</div><div class="line">config.<a class="code" href="structhal__i3c__master__control__config__t.html#a70a99b3fccfdde950a9abab1108cf839">data_buff_size</a> = 2;</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1">HAL_I3C_MASTER_STATUS_OK</a> == <a class="code" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d">hal_i3c_master_init</a>(<a class="code" href="group__hal__i3c__master__enum.html#ggafd19b67ffe7261208b5499a06fba63c0a0f72e963cd00e2c33156edf6ed078c05">HAL_I3C_MASTER_0</a>, &amp;init_config)) {</div><div class="line">    <span class="comment">//Send data</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1">HAL_I3C_MASTER_STATUS_OK</a> != <a class="code" href="group___i3_c___m_a_s_t_e_r.html#ga0f2ae485a252fb50facb3fecde735356">hal_i3c_master_control</a>(<a class="code" href="group__hal__i3c__master__enum.html#ggafd19b67ffe7261208b5499a06fba63c0a0f72e963cd00e2c33156edf6ed078c05">HAL_I3C_MASTER_0</a>, &amp;config)) {</div><div class="line">        <span class="comment">//Error handler;</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">// Callback function sample code. This function should be passed to driver while calling the function #hal_i3c_master_control().</span></div><div class="line"><span class="keywordtype">void</span> i3c_user_callback (<a class="code" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port,uint8_t slave_address, <a class="code" href="group___i3_c___m_a_s_t_e_r.html#gabed4615a11709b7b71faa559b609b371">hal_i3c_master_callback_event_t</a> event, <span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371aedd7ce273af05ab708e780c867818740">HAL_I3C_EVENT_SUCCESS</a> == event) {</div><div class="line">        <span class="comment">//send success;</span></div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// handle other error ;</span></div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="comment">//hal_i3c_master_deinit(HAL_I3C_MASTER_0);// Call this function if the I3C is no longer in use.</span></div></div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli"><b>Using</b> <b>Private</b> <b>Write/<b>Read</b> <b>mode</b>.</b> </p><ul>
<li>I3C private write format: <div class="image">
<img src="hal_i3c_private_write_format.png" alt="hal_i3c_private_write_format.png"/>
</div>
</li>
<li>I3C private read format: <div class="image">
<img src="hal_i3c_private_read_format.png" alt="hal_i3c_private_read_format.png"/>
</div>
</li>
<li>I3C private write to read format: <div class="image">
<img src="hal_i3c_private_write_to_read_format.png" alt="hal_i3c_private_write_to_read_format.png"/>
</div>
</li>
</ul>
<p class="startli">To use the I3C driver, you must configure the GPIO pins to pinmux to I3C SCL and I3C SDA, then call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO. ">hal_pinmux_set_function()</a> to select the pinmux function. After setting the pinmux, call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> to initialize I3C status. Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> to release the I3C resource.<br />
 Steps are shown below:</p><ul>
<li>Step1: Call <a class="el" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d" title="This function initializes the GPIO hardware with basic functionality. ">hal_gpio_init()</a> to initialize the pin. For more details about hal_gpio_init, please refer to GPIO module in HAL.</li>
<li>Step2: Call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO. ">hal_pinmux_set_function()</a> to set the GPIO pinmux or use the EPT tool to apply the pinmux settings.</li>
<li>Step3: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> to initialize the I3C master.</li>
<li>Step4: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#gacd05dce1acbb7202737222c930dbc65c" title="This function for private read/write from/to slave device. ">hal_i3c_master_transfer()</a> to send/receive data to or from the slave device.</li>
<li>Step5: Call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> to de-allocate the I3C master if it is no longer in use.</li>
<li>Sample code: <div class="fragment"><div class="line">ATTR_ZIDATA_IN_NONCACHED_SYSRAM_4BYTE_ALIGN  <span class="keyword">static</span> uint8_t i3c_rx_buff[128];</div><div class="line">ATTR_ZIDATA_IN_NONCACHED_SYSRAM_4BYTE_ALIGN  <span class="keyword">static</span> uint8_t i3c_tx_buff[128];</div><div class="line"></div><div class="line"><span class="comment">//pid: should be gotten from  the sensor datasheet, da: an address which is assigned to the &#39;pid&#39; device</span></div><div class="line"><a class="code" href="structhal__i3c__master__pid__da__map__t.html">hal_i3c_master_pid_da_map_t</a> slave_device_map[1] = {</div><div class="line">   {.<a class="code" href="structhal__i3c__master__pid__da__map__t.html#ab0b361e500d8fd4abd380303477c5e42">pid</a> = {0x02, 0x08, 0x00, 0x6C, 0x10, 0x0B}, .da = 0x22},</div><div class="line">};</div><div class="line"></div><div class="line"><a class="code" href="structhal__i3c__master__config__t.html">hal_i3c_master_config_t</a>    init_config;</div><div class="line"><a class="code" href="structhal__i3c__master__transfer__config__t.html">hal_i3c_master_transfer_config_t</a> config;</div><div class="line"></div><div class="line"><span class="comment">//Init GPIO, set GPIO pinmux (if EPT tool has not been used to configure the related pinmux).</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daad6e787b006357d37425a1202449c426d">HAL_GPIO_27</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>);</div><div class="line"><span class="comment">//Call hal_pinmux_set_function() to set GPIO pinmux, for more information, please reference hal_pinmux_define.h</span></div><div class="line"><span class="comment">//It is not necessary to configure pinmux if the EPT tool is used.</span></div><div class="line"><span class="comment">//function_index = HAL_GPIO_17_I3C0_SCL</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa497b053d686d2f1c04d992000088ccf5">HAL_GPIO_17</a>, function_index);</div><div class="line"><span class="comment">//function_index = HAL_GPIO_18_I3C0_SDA</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa42be09102c1b89abc64ace668be9e490">HAL_GPIO_18</a>, function_index);</div><div class="line"></div><div class="line"><span class="comment">//Init I3C master config parameter</span></div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a11918d123925f61f95898a3ed7bf6b16">mode</a>           = <a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggafb0f18a08a709df04558900032d8ad8dade52d4d733423c51725cd784bc9e999f">HAL_I3C_MASTER_WORKING_MODE_I3C</a>;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a0fd0deacc6b63563d58437a05aa19955">map_pid_da_config</a> = slave_device_map;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#aa6cde4d300ab24e8545d93e6d46058a0">map_pid_da_sz</a>     = <span class="keyword">sizeof</span>(slave_device_map) / <span class="keyword">sizeof</span>(<a class="code" href="structhal__i3c__master__pid__da__map__t.html">hal_i3c_master_pid_da_map_t</a>);;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#ae6db45f29353cfee0b2dd9ee378546a7">fast_speed_khz</a> = 1000;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a200d150b5ae6d6b90d427cb445e8a84b">high_speed_khz</a> = 12000;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a31be928b34b3c93bf5e3cb469250cbb2">call_back</a> = i3c_user_callback;</div><div class="line">init_config.<a class="code" href="structhal__i3c__master__config__t.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a> = NULL;</div><div class="line"></div><div class="line"><span class="comment">//Get data from slave device of 0xF register</span></div><div class="line">i3c_tx_buff = 0x0F;</div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#af40ca89c7a37243a6d5a03d2352069c3">trans_type</a>     = <a class="code" href="group___i3_c___m_a_s_t_e_r.html#gga1f4dc6ea6bd316e84b56d3cd5fe41e36a54f88493bb2413037bf25324668ecfc5">HAL_I3C_MASTER_TRANSFER_TYPE_SEND_TO_RECEIVE</a>;</div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#ad6f6033ee92f8a9b874bd40df8d6afd3">slave_addr</a>     = 0x22; <span class="comment">//Dynamic Address</span></div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#a43b0ef1f367a56f4b95f19760dc159f7">send_buff</a>      = i3c_tx_buff;</div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#ad8feeb4ac0b896269d528f8cc6644629">send_size</a>      = 1;</div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#a62db31036412e0d65022850a7f750993">recv_buff</a>      = i3c_rx_buff;</div><div class="line">config.<a class="code" href="structhal__i3c__master__transfer__config__t.html#a8306846ea833d7c5086f919a5a1a9a02">recv_size</a>      = 1;</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1">HAL_I3C_MASTER_STATUS_OK</a> == <a class="code" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d">hal_i3c_master_init</a>(<a class="code" href="group__hal__i3c__master__enum.html#ggafd19b67ffe7261208b5499a06fba63c0a0f72e963cd00e2c33156edf6ed078c05">HAL_I3C_MASTER_0</a>, &amp;init_config)) {</div><div class="line">    <span class="comment">//Send data</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1">HAL_I3C_MASTER_STATUS_OK</a> != <a class="code" href="group___i3_c___m_a_s_t_e_r.html#gacd05dce1acbb7202737222c930dbc65c">hal_i3c_master_transfer</a>(<a class="code" href="group__hal__i3c__master__enum.html#ggafd19b67ffe7261208b5499a06fba63c0a0f72e963cd00e2c33156edf6ed078c05">HAL_I3C_MASTER_0</a>, &amp;config)) {</div><div class="line">        <span class="comment">//Error handler;</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">// Callback function sample code. This function should be passed to the driver while calling the function #hal_i3c_master_control().</span></div><div class="line"><span class="keywordtype">void</span> i3c_user_callback (<a class="code" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port,uint8_t slave_address, <a class="code" href="group___i3_c___m_a_s_t_e_r.html#gabed4615a11709b7b71faa559b609b371">hal_i3c_master_callback_event_t</a> event, <span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371aedd7ce273af05ab708e780c867818740">HAL_I3C_EVENT_SUCCESS</a> == event) {</div><div class="line">        <span class="comment">//send success;</span></div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// handle other error ;</span></div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="comment">//hal_i3c_master_deinit(HAL_I2C_MASTER_0);// Call this function if the I3C is no longer in use.</span></div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhal__i3c__master__pid__da__map__t.html">hal_i3c_master_pid_da_map_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure defines the map of PID and Da for I3C initialize.  <a href="structhal__i3c__master__pid__da__map__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhal__i3c__master__config__t.html">hal_i3c_master_config_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure defines the configuration parameters for I3C initialize.  <a href="structhal__i3c__master__config__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhal__i3c__master__control__config__t.html">hal_i3c_master_control_config_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure defines the configuration parameters for I3C CCC transfer.  <a href="structhal__i3c__master__control__config__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhal__i3c__master__transfer__config__t.html">hal_i3c_master_transfer_config_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure defines the configuration parameters for I3C private transfer.  <a href="structhal__i3c__master__transfer__config__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gade6299995e53719d9d1e6af578340c5b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a> { <br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba0f115528dd5eba2a6ec20e788d23ccf7">HAL_I3C_MASTER_STATUS_ERROR</a> = -6, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba60c379da4c60fbbbc943e811a39df24b">HAL_I3C_MASTER_STATUS_ERROR_BUS_CFG</a> = -5, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba9287d7f022161b7c9eed93817b35e230">HAL_I3C_MASTER_STATUS_ERROR_NO_SPACE</a> = -4, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983">HAL_I3C_MASTER_STATUS_ERROR_BUSY</a> = -3, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba52a54c4fdc225454ac39b487a4336ba8">HAL_I3C_MASTER_STATUS_INVALID_PORT_NUMBER</a> = -2, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5baf7f3eb1fb7b12c562d0fa1a762092273">HAL_I3C_MASTER_STATUS_INVALID_PARAMETER</a> = -1, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1">HAL_I3C_MASTER_STATUS_OK</a> = 0
<br />
 }<tr class="memdesc:gade6299995e53719d9d1e6af578340c5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum defines the HAL interface return value.  <a href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gade6299995e53719d9d1e6af578340c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabed4615a11709b7b71faa559b609b371"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gabed4615a11709b7b71faa559b609b371">hal_i3c_master_callback_event_t</a> { <br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371aedd7ce273af05ab708e780c867818740">HAL_I3C_EVENT_SUCCESS</a> = 0, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371ae2acb98fae980cd81f8ccc7be9d2a587">HAL_I3C_EVENT_ACK_ERROR</a> = 1, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a0c71bfdc19c2da18240dff1d30b6c6d2">HAL_I3C_EVENT_NACK_ERROR</a> = 2, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a2012fbd0eea74b7843ded22613b12d5f">HAL_I3C_EVENT_ARB_LOST</a> = 3, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a115c98bc5b458891c76c5e7c815b29a7">HAL_I3C_EVENT_DAA</a> = 4, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a4d3f11c77e9d66e3555a8859a2b4be2f">HAL_I3C_EVENT_TIMEOUT</a> = 5, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371aad1f74493e4b078a8bdc98b59e90f328">HAL_I3C_EVENT_DMA_ERROR</a> = 6, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a9a203ce1015a62aba91e07655922b355">HAL_I3C_EVENT_IBI</a> = 7, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371aeb2d7a2df0699c8ad7e94d81fd6920dc">HAL_I3C_EVENT_ERROR</a> = 8, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggabed4615a11709b7b71faa559b609b371a7eff0dfe38127860688cbbd802094758">HAL_I3C_EVENT_UNKNOW</a> = 9
<br />
 }<tr class="memdesc:gabed4615a11709b7b71faa559b609b371"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum defines the transaction result event.  <a href="group___i3_c___m_a_s_t_e_r.html#gabed4615a11709b7b71faa559b609b371">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gabed4615a11709b7b71faa559b609b371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f4dc6ea6bd316e84b56d3cd5fe41e36"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga1f4dc6ea6bd316e84b56d3cd5fe41e36">hal_i3c_master_transfer_type_t</a> { <br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#gga1f4dc6ea6bd316e84b56d3cd5fe41e36a54f88493bb2413037bf25324668ecfc5">HAL_I3C_MASTER_TRANSFER_TYPE_SEND_TO_RECEIVE</a> = 0, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#gga1f4dc6ea6bd316e84b56d3cd5fe41e36aa3a4bdcc2033ba429dcde2c79fa60d96">HAL_I3C_MASTER_TRANSFER_TYPE_SEND</a>, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#gga1f4dc6ea6bd316e84b56d3cd5fe41e36a3214fb6f7bf433e51c3c7bfc887c8adf">HAL_I3C_MASTER_TRANSFER_TYPE_RECEIVE</a>
<br />
 }<tr class="memdesc:ga1f4dc6ea6bd316e84b56d3cd5fe41e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum defines the I3C transfer type.  <a href="group___i3_c___m_a_s_t_e_r.html#ga1f4dc6ea6bd316e84b56d3cd5fe41e36">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga1f4dc6ea6bd316e84b56d3cd5fe41e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb0f18a08a709df04558900032d8ad8d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gafb0f18a08a709df04558900032d8ad8d">hal_i3c_master_working_mode_t</a> { <br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggafb0f18a08a709df04558900032d8ad8dade52d4d733423c51725cd784bc9e999f">HAL_I3C_MASTER_WORKING_MODE_I3C</a> = 0, 
<br />
&#160;&#160;<a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggafb0f18a08a709df04558900032d8ad8dabfacb509497096b834925b09efd0eac9">HAL_I3C_MASTER_WORKING_MODE_I2C</a>
<br />
 }<tr class="memdesc:gafb0f18a08a709df04558900032d8ad8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum defines the I3C hardware working mode.  <a href="group___i3_c___m_a_s_t_e_r.html#gafb0f18a08a709df04558900032d8ad8d">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gafb0f18a08a709df04558900032d8ad8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga13b9d5ae5e89ffecd48fe82149c8557d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d">hal_i3c_master_init</a> (<a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port, <a class="el" href="structhal__i3c__master__config__t.html">hal_i3c_master_config_t</a> *i3c_config)</td></tr>
<tr class="memdesc:ga13b9d5ae5e89ffecd48fe82149c8557d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the I3C master before starting a transaction.  <a href="#ga13b9d5ae5e89ffecd48fe82149c8557d">More...</a><br /></td></tr>
<tr class="separator:ga13b9d5ae5e89ffecd48fe82149c8557d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f2ae485a252fb50facb3fecde735356"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga0f2ae485a252fb50facb3fecde735356">hal_i3c_master_control</a> (<a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port, <a class="el" href="structhal__i3c__master__control__config__t.html">hal_i3c_master_control_config_t</a> *config)</td></tr>
<tr class="memdesc:ga0f2ae485a252fb50facb3fecde735356"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sends the CCC command to the slave device (only used for I3C mode).  <a href="#ga0f2ae485a252fb50facb3fecde735356">More...</a><br /></td></tr>
<tr class="separator:ga0f2ae485a252fb50facb3fecde735356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd05dce1acbb7202737222c930dbc65c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gacd05dce1acbb7202737222c930dbc65c">hal_i3c_master_transfer</a> (<a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port, <a class="el" href="structhal__i3c__master__transfer__config__t.html">hal_i3c_master_transfer_config_t</a> *config)</td></tr>
<tr class="memdesc:gacd05dce1acbb7202737222c930dbc65c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function for private read/write from/to slave device.  <a href="#gacd05dce1acbb7202737222c930dbc65c">More...</a><br /></td></tr>
<tr class="separator:gacd05dce1acbb7202737222c930dbc65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a11d9049623fb4e54db14eb8e86380d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d">hal_i3c_master_deinit</a> (<a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a> i3c_port)</td></tr>
<tr class="memdesc:ga5a11d9049623fb4e54db14eb8e86380d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function releases the I3C master when the transaction process is complete.  <a href="#ga5a11d9049623fb4e54db14eb8e86380d">More...</a><br /></td></tr>
<tr class="separator:ga5a11d9049623fb4e54db14eb8e86380d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__hal__i3c__master__enum"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__i3c__master__enum.html">Enum</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__hal__i3c__master__typedef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__i3c__master__typedef.html">Typedef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gabed4615a11709b7b71faa559b609b371"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___i3_c___m_a_s_t_e_r.html#gabed4615a11709b7b71faa559b609b371">hal_i3c_master_callback_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This enum defines the transaction result event. </p>
<p>This result is passed through a callback function. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371aedd7ce273af05ab708e780c867818740"></a>HAL_I3C_EVENT_SUCCESS&#160;</td><td class="fielddoc">
<p>The transaction completed without any error. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371ae2acb98fae980cd81f8ccc7be9d2a587"></a>HAL_I3C_EVENT_ACK_ERROR&#160;</td><td class="fielddoc">
<p>An ACK error occurred during transaction. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a0c71bfdc19c2da18240dff1d30b6c6d2"></a>HAL_I3C_EVENT_NACK_ERROR&#160;</td><td class="fielddoc">
<p>A NACK error occurred during transaction. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a2012fbd0eea74b7843ded22613b12d5f"></a>HAL_I3C_EVENT_ARB_LOST&#160;</td><td class="fielddoc">
<p>The current master lost arbtration. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a115c98bc5b458891c76c5e7c815b29a7"></a>HAL_I3C_EVENT_DAA&#160;</td><td class="fielddoc">
<p>An DAA event occurred. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a4d3f11c77e9d66e3555a8859a2b4be2f"></a>HAL_I3C_EVENT_TIMEOUT&#160;</td><td class="fielddoc">
<p>A timeout error occurred during transaction. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371aad1f74493e4b078a8bdc98b59e90f328"></a>HAL_I3C_EVENT_DMA_ERROR&#160;</td><td class="fielddoc">
<p>A DMA error occurred during transaction. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a9a203ce1015a62aba91e07655922b355"></a>HAL_I3C_EVENT_IBI&#160;</td><td class="fielddoc">
<p>An IBI event occurred. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371aeb2d7a2df0699c8ad7e94d81fd6920dc"></a>HAL_I3C_EVENT_ERROR&#160;</td><td class="fielddoc">
<p>An error occurred during transaction. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggabed4615a11709b7b71faa559b609b371a7eff0dfe38127860688cbbd802094758"></a>HAL_I3C_EVENT_UNKNOW&#160;</td><td class="fielddoc">
<p>Unknown event reason. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="gade6299995e53719d9d1e6af578340c5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This enum defines the HAL interface return value. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5ba0f115528dd5eba2a6ec20e788d23ccf7"></a>HAL_I3C_MASTER_STATUS_ERROR&#160;</td><td class="fielddoc">
<p>An error occurred and the transaction failed. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5ba60c379da4c60fbbbc943e811a39df24b"></a>HAL_I3C_MASTER_STATUS_ERROR_BUS_CFG&#160;</td><td class="fielddoc">
<p>An error occurred during I3C bus config. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5ba9287d7f022161b7c9eed93817b35e230"></a>HAL_I3C_MASTER_STATUS_ERROR_NO_SPACE&#160;</td><td class="fielddoc">
<p>The sw FIFO full. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983"></a>HAL_I3C_MASTER_STATUS_ERROR_BUSY&#160;</td><td class="fielddoc">
<p>The I2C bus is busy. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5ba52a54c4fdc225454ac39b487a4336ba8"></a>HAL_I3C_MASTER_STATUS_INVALID_PORT_NUMBER&#160;</td><td class="fielddoc">
<p>A wrong port number is given. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5baf7f3eb1fb7b12c562d0fa1a762092273"></a>HAL_I3C_MASTER_STATUS_INVALID_PARAMETER&#160;</td><td class="fielddoc">
<p>A wrong parameter is given. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1"></a>HAL_I3C_MASTER_STATUS_OK&#160;</td><td class="fielddoc">
<p>No error occurred during the function call. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga1f4dc6ea6bd316e84b56d3cd5fe41e36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga1f4dc6ea6bd316e84b56d3cd5fe41e36">hal_i3c_master_transfer_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This enum defines the I3C transfer type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga1f4dc6ea6bd316e84b56d3cd5fe41e36a54f88493bb2413037bf25324668ecfc5"></a>HAL_I3C_MASTER_TRANSFER_TYPE_SEND_TO_RECEIVE&#160;</td><td class="fielddoc">
<p>Transfer type of send to receive. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga1f4dc6ea6bd316e84b56d3cd5fe41e36aa3a4bdcc2033ba429dcde2c79fa60d96"></a>HAL_I3C_MASTER_TRANSFER_TYPE_SEND&#160;</td><td class="fielddoc">
<p>Transfer type of send. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga1f4dc6ea6bd316e84b56d3cd5fe41e36a3214fb6f7bf433e51c3c7bfc887c8adf"></a>HAL_I3C_MASTER_TRANSFER_TYPE_RECEIVE&#160;</td><td class="fielddoc">
<p>Transfer type of receive. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="gafb0f18a08a709df04558900032d8ad8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___i3_c___m_a_s_t_e_r.html#gafb0f18a08a709df04558900032d8ad8d">hal_i3c_master_working_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This enum defines the I3C hardware working mode. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggafb0f18a08a709df04558900032d8ad8dade52d4d733423c51725cd784bc9e999f"></a>HAL_I3C_MASTER_WORKING_MODE_I3C&#160;</td><td class="fielddoc">
<p>I3C hardware work in I3C mode. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggafb0f18a08a709df04558900032d8ad8dabfacb509497096b834925b09efd0eac9"></a>HAL_I3C_MASTER_WORKING_MODE_I2C&#160;</td><td class="fielddoc">
<p>I3C hardware work in I2C mode. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0f2ae485a252fb50facb3fecde735356"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a> hal_i3c_master_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a>&#160;</td>
          <td class="paramname"><em>i3c_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhal__i3c__master__control__config__t.html">hal_i3c_master_control_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sends the CCC command to the slave device (only used for I3C mode). </p>
<p>This function will return a value immediately after configuring the hardware registers. It notifies user by callback. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i3c_port</td><td>is the I3C master port number. The value is defined in <a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0" title="This enum defines the I3C port. ">hal_i3c_master_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>is the configuration parameter of this API for send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba52a54c4fdc225454ac39b487a4336ba8" title="A wrong port number is given. ">HAL_I3C_MASTER_STATUS_INVALID_PORT_NUMBER</a>, an invalid port number is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5baf7f3eb1fb7b12c562d0fa1a762092273" title="A wrong parameter is given. ">HAL_I3C_MASTER_STATUS_INVALID_PARAMETER</a>, an invalid transfer_frequency is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1" title="No error occurred during the function call. ">HAL_I3C_MASTER_STATUS_OK</a>, the operation completed successfully. <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983" title="The I2C bus is busy. ">HAL_I3C_MASTER_STATUS_ERROR_BUSY</a>, the I3C bus is in use.</dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code, please refer to <a class="el" href="group___i3_c___m_a_s_t_e_r.html#HAL_I3C_Master_Driver_Usage_Chapter">How to use this driver</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga0f2ae485a252fb50facb3fecde735356" title="This function sends the CCC command to the slave device (only used for I3C mode). ...">hal_i3c_master_control()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga5a11d9049623fb4e54db14eb8e86380d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a> hal_i3c_master_deinit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a>&#160;</td>
          <td class="paramname"><em>i3c_port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function releases the I3C master when the transaction process is complete. </p>
<p>Call this function if the I3C is no longer in use. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i3c_port</td><td>is the I3C master port number. The value is defined in <a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0" title="This enum defines the I3C port. ">hal_i3c_master_port_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__i2c__master__enum.html#ggad3ddfb889b2b8f2c4fc497e5fa0b0e5fa5c0a811f9575fb3783cb5025312fd201" title="A wrong port number is given. ">HAL_I2C_STATUS_INVALID_PORT_NUMBER</a>, an invalid port number is given; <br />
 <a class="el" href="group__hal__i2c__master__enum.html#ggad3ddfb889b2b8f2c4fc497e5fa0b0e5fabb768e77cd5626c1a2c07417bee446e0" title="No error occurred during the function call. ">HAL_I2C_STATUS_OK</a>, the operation completed successfully. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function must be called when the I3C is no longer in use. Release the I3C resource for the other users to use this I3C master. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code, please refer to <a class="el" href="group___i3_c___m_a_s_t_e_r.html#HAL_I3C_Master_Driver_Usage_Chapter">How to use this driver</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga13b9d5ae5e89ffecd48fe82149c8557d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a> hal_i3c_master_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a>&#160;</td>
          <td class="paramname"><em>i3c_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhal__i3c__master__config__t.html">hal_i3c_master_config_t</a> *&#160;</td>
          <td class="paramname"><em>i3c_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the I3C master before starting a transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i3c_port</td><td>is the I3C master port number. The value is defined in <a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0" title="This enum defines the I3C port. ">hal_i3c_master_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i3c_config</td><td>Is the configuration parameter to initialize the I3C. Details are described at <a class="el" href="structhal__i3c__master__config__t.html" title="This structure defines the configuration parameters for I3C initialize. ">hal_i3c_master_config_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba52a54c4fdc225454ac39b487a4336ba8" title="A wrong port number is given. ">HAL_I3C_MASTER_STATUS_INVALID_PORT_NUMBER</a>, an invalid port number is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5baf7f3eb1fb7b12c562d0fa1a762092273" title="A wrong parameter is given. ">HAL_I3C_MASTER_STATUS_INVALID_PARAMETER</a>, an invalid transfer_frequency is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1" title="No error occurred during the function call. ">HAL_I3C_MASTER_STATUS_OK</a>, the operation completed successfully. <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983" title="The I2C bus is busy. ">HAL_I3C_MASTER_STATUS_ERROR_BUSY</a>, the I3C bus is in use. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga5a11d9049623fb4e54db14eb8e86380d" title="This function releases the I3C master when the transaction process is complete. ">hal_i3c_master_deinit()</a> must be called when the I3C is no longer in use, release the I3C resource for the other users to use this I3C master. Please DO NOT call <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> in interrupt handler, it may cause deadlock. In a multi-task applications, if <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> returns error <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983" title="The I2C bus is busy. ">HAL_I3C_MASTER_STATUS_ERROR_BUSY</a>, we strongly suggest calling functions that can yield CPU and try again later. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;hal_i3c_master_status_t i3c_master_init(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  hal_i3c_master_port_t   i3c_port;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  hal_i3c_master_status_t error_status;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  //Use the sensor PID to assign the Dynamic Address to this sensor</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  hal_i3c_master_pid_da_map_t slave_device_da_map[2] = {</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;     {.pid = {0x02, 0x08, 0x00, 0x6C, 0x10, 0x0B}, .da = 0x22}, //config Da(0x22) to slave device0(PID:0x02, 0x08, 0x00, 0x6C, 0x10, 0x0B)</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;     {.pid = {0x00, 0x01, 0x00, 0x12, 0x02, 0x0C}, .da = 0x23}  //config Da(0x23) to slave device1(PID:0x00, 0x01, 0x00, 0x12, 0x02, 0x0C)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  };</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  hal_i3c_master_init_config_t    init_config;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  i3c_port = HAL_I3C_MASTER_0;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  init_config.mode           = HAL_I3C_MASTER_WORKING_MODE_I3C;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  init_config.fast_speed_khz = 1000; //1Mhz</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  init_config.high_speed_khz = 12000;//12Mhz</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  init_config.call_back = NULL;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  init_config.user_data = NULL;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  init_config.map_pid_da_config = slave_device_map;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  init_config.map_pid_da_sz     = sizeof(slave_device_da_map) / sizeof(hal_i3c_master_pid_da_map_t);</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  while (try_times &lt; 10) {</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      error_status = hal_i3c_master_init(i3c_port, &amp;init_config);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      if (error_status != HAL_I3C_MASTER_STATUS_OK) {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;          vTaskDelay((portTickType)100 / portTICK_RATE_MS);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;          try_times ++;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      } else {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        break;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      }</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;   }</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  return error_status;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div></div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ga13b9d5ae5e89ffecd48fe82149c8557d" title="This function initializes the I3C master before starting a transaction. ">hal_i3c_master_init()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gacd05dce1acbb7202737222c930dbc65c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gade6299995e53719d9d1e6af578340c5b">hal_i3c_master_status_t</a> hal_i3c_master_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0">hal_i3c_master_port_t</a>&#160;</td>
          <td class="paramname"><em>i3c_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhal__i3c__master__transfer__config__t.html">hal_i3c_master_transfer_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function for private read/write from/to slave device. </p>
<p>This function will return a value immediately after configuring the hardware registers. It notifies user by callback. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i3c_port</td><td>is the I3C master port number. The value is defined in <a class="el" href="group__hal__i3c__master__enum.html#gafd19b67ffe7261208b5499a06fba63c0" title="This enum defines the I3C port. ">hal_i3c_master_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>is the configuration parameter of this API for send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba52a54c4fdc225454ac39b487a4336ba8" title="A wrong port number is given. ">HAL_I3C_MASTER_STATUS_INVALID_PORT_NUMBER</a>, an invalid port number is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5baf7f3eb1fb7b12c562d0fa1a762092273" title="A wrong parameter is given. ">HAL_I3C_MASTER_STATUS_INVALID_PARAMETER</a>, an invalid transfer_frequency is given; <br />
 <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5bad909f066460c88d8293a768d960874f1" title="No error occurred during the function call. ">HAL_I3C_MASTER_STATUS_OK</a>, the operation completed successfully. <a class="el" href="group___i3_c___m_a_s_t_e_r.html#ggade6299995e53719d9d1e6af578340c5ba38024bbd02063ff839af19711e6de983" title="The I2C bus is busy. ">HAL_I3C_MASTER_STATUS_ERROR_BUSY</a>, the I3C bus is in use.</dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code, please refer to <a class="el" href="group___i3_c___m_a_s_t_e_r.html#HAL_I3C_Master_Driver_Usage_Chapter">How to use this driver</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i3_c___m_a_s_t_e_r.html#gacd05dce1acbb7202737222c930dbc65c" title="This function for private read/write from/to slave device. ">hal_i3c_master_transfer()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 29 2023 02:13:06 for AB158x Series MCU API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
